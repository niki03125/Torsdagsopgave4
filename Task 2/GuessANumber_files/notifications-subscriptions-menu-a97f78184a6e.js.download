"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["notifications-subscriptions-menu","vendors-node_modules_primer_react_lib-esm_FeatureFlags_useFeatureFlag_js-node_modules_primer_-2ed503","vendors-node_modules_primer_react_lib-esm_Link_Link_js-node_modules_primer_react_lib-esm_Spin-d020100","vendors-node_modules_primer_react_lib-esm_Link_Link_js-node_modules_primer_react_lib-esm_Spin-d020101"],{26886:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(96540),a=n(10619),i=n(87330),o=n(42297),l=n(75177),s=n(77393);let c=()=>null;function d(e){var t;return e.tabIndex>=0&&!e.disabled&&!(t=e).hidden&&(!t.type||"hidden"!==t.type)&&(t.offsetWidth>0||t.offsetHeight>0)}var u=n(44999),m=n(52464),p=n(64515),h=n(38621);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let b=()=>null,g=a.Ay.div.withConfig({displayName:"Dialog__DialogBase",componentId:"sc-13rdxb7-0"})(["box-shadow:",";border-radius:",";position:fixed;top:0;left:50%;transform:translateX(-50%);max-height:80vh;z-index:999;margin:10vh auto;background-color:",";width:",";outline:none;@media screen and (max-width:750px){width:100dvw;margin:0;border-radius:0;height:100dvh;}",";"],(0,o.Jt)("shadows.shadow.large"),(0,o.Jt)("radii.2"),(0,o.Jt)("colors.canvas.default"),e=>e.narrow?"320px":e.wide?"640px":"440px",u.A),y=(0,a.Ay)(l.A).withConfig({displayName:"Dialog__DialogHeaderBase",componentId:"sc-13rdxb7-1"})(["border-radius:"," "," 0px 0px;border-bottom:1px solid ",";display:flex;@media screen and (max-width:750px){border-radius:0px;}",";"],(0,o.Jt)("radii.2"),(0,o.Jt)("radii.2"),(0,o.Jt)("colors.border.default"),u.A);function _({theme:e,children:t,backgroundColor:n="canvas.subtle",...a}){return r.Children.toArray(t).every(e=>"string"==typeof e)&&(t=r.createElement(m.A,{fontSize:1,fontWeight:"bold"},t)),r.createElement(y,f({theme:e,p:3,backgroundColor:n},a),t)}_.displayName="DialogHeader";let v=a.Ay.span.withConfig({displayName:"Dialog__Overlay",componentId:"sc-13rdxb7-2"})(["&:before{position:fixed;top:0;right:0;bottom:0;left:0;display:block;cursor:default;content:' ';background:transparent;z-index:99;background:",";}"],(0,o.Jt)("colors.primer.canvas.backdrop")),x=(0,r.forwardRef)(({children:e,onDismiss:t=b,isOpen:n,initialFocusRef:a,returnFocusRef:o,...l},u)=>{let m=(0,r.useRef)(null),y=(0,r.useRef)(null);(0,p.T)(u,y);let _=(0,r.useRef)(null),x=()=>{t(),o&&o.current&&o.current.focus()},{getDialogProps:w}=function({modalRef:e,overlayRef:t,isOpen:n,onDismiss:a=c,initialFocusRef:i,closeButtonRef:o}){let l=(0,r.useCallback)(n=>{e.current&&t.current&&n.target instanceof Node&&!e.current.contains(n.target)&&t.current.contains(n.target)&&a()},[a,e,t]);(0,r.useEffect)(()=>{if(n)return document.addEventListener("click",l),()=>{document.removeEventListener("click",l)}},[n,l]),(0,r.useEffect)(()=>{n&&(i&&i.current?i.current.focus():o&&o.current&&o.current.focus())},[n,i,o]);let u=(0,r.useCallback)((t,n)=>{if(e.current){let r=Array.from(e.current.querySelectorAll("*")).filter(d);if(0===r.length)return;t.preventDefault();let a=document.activeElement;if(!a)return;let i=r.indexOf(a),o=1===n?0:r.length-1;return r[i+n]||r[o]}},[e]),m=(0,r.useCallback)(e=>{let t=e.shiftKey?-1:1,n=u(e,t);n&&n.focus()},[u]),p=(0,r.useCallback)(e=>{"Tab"===e.key&&m(e)},[m]);return(0,s.P)(e=>{n&&(a(),e.preventDefault())},[n,a]),{getDialogProps:()=>({onKeyDown:p})}}({modalRef:y,onDismiss:x,isOpen:n,initialFocusRef:a,closeButtonRef:_,returnFocusRef:o,overlayRef:m});return n?r.createElement(r.Fragment,null,r.createElement(v,{ref:m}),r.createElement(g,f({tabIndex:-1,ref:y,role:"dialog","aria-modal":"true"},l,w()),r.createElement(i.K,{icon:h.XIcon,ref:_,onClick:x,sx:{position:"absolute",top:"8px",right:"16px"},"aria-label":"Close",variant:"invisible"}),e)):null});_.propTypes={...l.A.propTypes},_.displayName="Dialog.Header",x.displayName="Dialog";var w=Object.assign(x,{Header:_})},48521:(e,t,n)=>{n.d(t,{u:()=>i});var r=n(96540),a=n(51207);function i(e){return(0,r.useContext)(a.c).enabled(e)}},34614:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(20053),a=n(96540),i=n(10619),o=n(25999),l=n(42297);n(69676);var s=n(64515),c=n(44999),d={Link:"prc-Link-Link-85e08"},u=n(48521),m=n(75177);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let h=(0,o.qU)({hoverColor:{property:"color",scale:"colors"}}),f=i.Ay.a.withConfig({displayName:"Link__StyledLink",componentId:"sc-14289xe-0"})(["color:",";text-decoration:none;text-decoration:",";[data-a11y-link-underlines='true'] &[data-inline='true']{text-decoration:underline;}&:hover{text-decoration:",";",";}&:is(button){display:inline-block;padding:0;font-size:inherit;white-space:nowrap;cursor:pointer;user-select:none;background-color:transparent;border:0;appearance:none;}",";"],e=>e.muted?(0,l.Jt)("colors.fg.muted")(e):(0,l.Jt)("colors.accent.fg")(e),e=>e.underline?"underline":void 0,e=>e.muted?"none":"underline",e=>e.hoverColor?h:e.muted?`color: ${(0,l.Jt)("colors.accent.fg")(e)}`:"",c.A),b=(0,a.forwardRef)(({as:e="a",className:t,inline:n,underline:i,...o},l)=>{let c=(0,u.u)("primer_react_css_modules_ga"),h=a.useRef(null);return((0,s.T)(l,h),c)?o.sx?a.createElement(m.A,p({as:e,className:(0,r.$)(t,d.Link),"data-muted":o.muted,"data-inline":n,"data-underline":i},o,{ref:h})):a.createElement(e,p({className:(0,r.$)(t,d.Link),"data-muted":o.muted,"data-inline":n,"data-underline":i},o,{ref:h})):a.createElement(f,p({as:e,className:t,"data-inline":n,underline:i},o,{ref:h}))});b.displayName="Link"},67269:(e,t,n)=>{n.d(t,{X:()=>y});var r=n(38621),a=n(96540),i=n(85349),o=n(75177),l=n(89035),s=n(84217),c=n(55847),d=n(81425);n(69676);var u=n(35357),m=n(32947),p=n(78373),h=n(48521);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function b(e){return Array.isArray(e)}let g={disabled:!0};function y({open:e,onOpenChange:t,renderAnchor:n=e=>{let{children:t,...n}=e;return a.createElement(c.Q,f({trailingAction:r.TriangleDownIcon},n),t)},anchorRef:y,placeholder:_,placeholderText:v="Filter items",inputLabel:x=v,selected:w,title:C=b(w)?"Select items":"Select an item",subtitle:A,onSelectedChange:k,filterValue:S,onFilterChange:j,items:E,footer:N,textInputProps:L,overlayProps:T,sx:O,...I}){let R=(0,m.B)(),F=(0,m.B)(),[$,P]=(0,u.p)(S,void 0,""),M=(0,a.useCallback)((e,t)=>{j(e,t),P(e)},[j,P]),D=(0,d.L)(y),B=(0,a.useCallback)(e=>t(!0,e),[t]),W=(0,a.useCallback)(e=>{t(!1,e)},[t]),z=(0,a.useMemo)(()=>{if(null===n)return null;let e=Array.isArray(w)?w:[...w?[w]:[]];return t=>n({...t,children:e.length?e.map(e=>e.text).join(", "):_})},[_,n,w]),q=(0,a.useMemo)(()=>E.map(e=>{let t=b(w)?w.includes(e):w===e;return{...e,role:"option",selected:"selected"in e&&void 0===e.selected?void 0:t,onAction:(t,n)=>{var r;if(null===(r=e.onAction)||void 0===r||r.call(e,t,n),!n.defaultPrevented){if(b(w)){let t=w.filter(t=>t!==e);k(w.includes(e)?t:[...t,e]);return}k(e===w?void 0:e),W("selection")}}}}),[W,k,E,w]),H=a.useRef(null),J=(0,a.useMemo)(()=>({sx:{m:2},contrast:!0,leadingVisual:r.SearchIcon,"aria-label":x,...L}),[x,L]),V=(0,h.u)("primer_react_select_panel_with_modern_action_list");return a.createElement(p.L4,null,a.createElement(i.T,{renderAnchor:z,anchorRef:D,open:e,onOpen:B,onClose:W,overlayProps:{role:"dialog","aria-labelledby":R,"aria-describedby":A?F:void 0,...T},focusTrapSettings:{initialFocusRef:H},focusZoneSettings:g},a.createElement(p.ST,null),V?null:a.createElement(p.QB,{value:""===$?"Showing all items":E.length<=0?"No matching items":`${E.length} matching ${1===E.length?"item":"items"}`}),a.createElement(o.A,{sx:{display:"flex",flexDirection:"column",height:"inherit",maxHeight:"inherit"}},a.createElement(o.A,{sx:{pt:2,px:3}},a.createElement(s.A,{as:"h1",id:R,sx:{fontSize:1}},C),A?a.createElement(o.A,{id:F,sx:{fontSize:0,color:"fg.muted"}},A):null),a.createElement(l.u,f({filterValue:$,onFilterChange:M,placeholderText:v},I,{role:"listbox","aria-labelledby":I["aria-label"]?void 0:R,"aria-multiselectable":b(w)?"true":"false",selectionVariant:b(w)?"multiple":"single",items:q,textInputProps:J,inputRef:H,sx:{...O,height:"inherit",maxHeight:"inherit"}})),N&&a.createElement(o.A,{sx:{display:"flex",borderTop:"1px solid",borderColor:"border.default",padding:2}},N))))}y.displayName="SelectPanel",y.displayName="SelectPanel"},38553:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(96540),a=n(10619),i=n(44999),o=n(76449),l=n(75177);n(69676);var s=n(32947);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}let d={small:"16px",medium:"32px",large:"64px"};function u({size:e="medium",srText:t="Loading","aria-label":n,...a}){let i=d[e],u=null!==t&&void 0===n,m=(0,s.B)();return r.createElement(l.A,{as:"span",sx:{display:"inline-flex"}},r.createElement("svg",c({height:i,width:i,viewBox:"0 0 16 16",fill:"none","aria-hidden":!0,"aria-label":null!=n?n:void 0,"aria-labelledby":u?m:void 0},a),r.createElement("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeOpacity:"0.25",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),r.createElement("path",{d:"M15 8a7.002 7.002 0 00-7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",vectorEffect:"non-scaling-stroke"})),u?r.createElement(o.s,{id:m},t):null)}u.displayName="Spinner";let m=(0,a.Ay)(u).withConfig({displayName:"Spinner__StyledSpinner",componentId:"sc-1knt686-0"})(["@keyframes rotate-keyframes{100%{transform:rotate(360deg);}}animation:rotate-keyframes 1s linear infinite;",""],i.A);m.displayName="Spinner"},76449:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(10619),a=n(44999);let i=r.Ay.span.withConfig({displayName:"VisuallyHidden",componentId:"sc-1rhpuyf-0"})(["&:not(:focus):not(:active):not(:focus-within){clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;}",""],a.A)},42297:(e,t,n)=>{n.d(t,{Sq:()=>d,K4:()=>m,Jt:()=>c});var r=n(49236),a=n(25999),i=n(44360);let{Jt:o,Zz:l,qU:s}=a,c=e=>(function(e,t){return void 0===t&&(t=null),function(n){return(0,r.Jt)(n.theme,e,t)}})(e,o(i.A,e)),d=l(a.xe,a.yW,a.Vy),u=s({whiteSpace:{property:"whiteSpace"}}),m=l(a.Il,u);l(a.PQ,a.r7),a.Zp},78373:(e,t,n)=>{n.d(t,{L4:()=>l,QB:()=>c,ST:()=>s});var r=n(96540),a=n(76449);let i=r.createContext(null);function o(){let e=r.useContext(i);if(!e)throw Error("useLiveRegion() must be used within a <LiveRegion>");return e}function l({children:e}){let[t,n]=r.useState(""),a=r.useMemo(()=>({announce:n,message:t}),[t]);return r.createElement(i.Provider,{value:a},e)}function s(){let e=o();return r.createElement(a.s,{role:"status","aria-live":"polite","aria-atomic":!0},e.message)}function c({value:e}){let t=o(),n=r.useRef(t),a=r.useRef(!1);return r.useEffect(()=>{n.current=t},[t]),r.useEffect(()=>{if(!0!==a.current)return;let t=setTimeout(()=>{n.current.announce(e)},750);return()=>{clearTimeout(t)}},[e]),r.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),null}l.displayName="LiveRegion",s.displayName="LiveRegionOutlet"},84923:(e,t,n)=>{let r;var a,i,o=n(72245),l=n(74848),s=n(96540),c=n(89323),d=n(26886),u=n(38621),m=n(28784);let p=(r="/notifications/subscribe",async e=>{try{let t=await (0,m.DI)(r,{method:"POST",body:e});if(t.ok)return t;return Error("Failed to update")}catch(e){return e}});var h=n(16823),f=n(52464);!function(e){e.NONE="none",e.WATCHING="watching",e.IGNORING="ignoring",e.CUSTOM="custom"}(a||(a={}));let b={none:"Participating and @mentions",watching:"All Activity",ignoring:"Ignore",custom:"Custom"},g={...b,none:"Participating"},y={none:"Watch",watching:"Unwatch",ignoring:"Stop ignoring",custom:"Unwatch"},_=[{name:b.none,description:"Only receive notifications from this repository when participating or @mentioned.",subscriptionType:"none"},{name:b.watching,description:"Notified of all notifications on this repository.",subscriptionType:"watching"},{name:b.ignoring,description:"Never be notified.",subscriptionType:"ignoring"},{name:b.custom,description:"Select events you want to be notified of in addition to participating and @mentions.",trailingIcon:(0,s.createElement)(u.ArrowRightIcon),subscriptionType:"custom"}],v=e=>e in y?y[e]:"",x=(e,t)=>{let n=v(e),r=g[e];return"ignoring"===e?`${n} in ${t}`:`${n}: ${r} in ${t}`};function w(e){return(0,l.jsx)(h.l,{selectionVariant:"single",children:_.map((t,n)=>(0,l.jsxs)(s.Fragment,{children:[(0,l.jsxs)(h.l.Item,{selected:t.subscriptionType===e.selected,onSelect:()=>e.onSelect(t.subscriptionType),children:[(0,l.jsx)(f.A,{sx:{fontWeight:"bold"},children:t.name}),(0,l.jsx)(h.l.Description,{variant:"block",children:t.description}),t.trailingIcon?(0,l.jsx)(h.l.TrailingVisual,{children:t.trailingIcon}):null]}),n!==_.length-1?(0,l.jsx)(h.l.Divider,{}):""]},n))})}try{w.displayName||(w.displayName="SubscriptionList")}catch{}var C=n(82560),A=n(38501),k=n(67269),S=n(55847),j=n(94977),E=n(38553);let N={footerContainer:"FooterActions-module__footerContainer--Z9ixI",buttonsContainer:"FooterActions-module__buttonsContainer--lkkwg"};function L(e){let[t,n]=(0,s.useState)(!1),r=(0,s.useCallback)(()=>(e.nextFocusRef?.current?.focus(),!0),[e.nextFocusRef]),a=(0,s.useCallback)(()=>{n(!0)},[]),i=(0,s.useCallback)(()=>{e.onApply(),setTimeout(()=>{e?.checkStatus&&e.checkStatus(a)},600)},[e,a]);return(0,l.jsxs)("div",{className:N.footerContainer,children:[e.showError?(0,l.jsx)(f.A,{sx:{py:3,pl:3,color:"var(--fgColor-muted, var(--color-fg-muted))"},children:"Error. Please try again."}):null,(0,l.jsxs)("div",{className:N.buttonsContainer,style:e.overrideButtonStyles??{padding:"var(--base-size-16)"},children:[!e.showError&&t?(0,l.jsx)(E.A,{size:"small",sx:{mr:2}}):null,(0,l.jsx)(S.Q,{size:"small",onClick:()=>e.onCancel(),onBlur:t=>{e.disabled&&r(t)},children:"Cancel"}),(0,l.jsx)(S.Q,{disabled:e.disabled,variant:"primary",size:"small",onClick:()=>i(),onBlur:r,sx:{ml:2},children:"Apply"})]})]})}try{L.displayName||(L.displayName="FooterActions")}catch{}function T(e){let[t,n]=(0,s.useState)(!1),[r,a]=(0,s.useState)(""),i=e.items.filter(e=>e?.text?.toLowerCase().startsWith(r.toLowerCase())),o=(0,s.useCallback)(()=>{e.applyLabels(),n(!1)},[e]),c=(0,s.useCallback)(()=>{e.resetLabels(),n(!1)},[e]),d=s.memo(O);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(k.X,{title:"Select labels",renderAnchor:t=>0===e.items.length?(0,l.jsx)(j.A,{text:"Add labels to this repository to filter on them.",direction:"s",children:(0,l.jsx)(d,{anchorProps:t,itemsLength:e.items.length,labelsText:e.labelsText})}):(0,l.jsx)(d,{anchorProps:t,itemsLength:e.items.length,labelsText:e.labelsText}),placeholderText:"Filter labels",open:t,onOpenChange:n,items:i,selected:e.selectedLabels,onSelectedChange:e.onChangeLabels,onFilterChange:a,showItemDividers:!0,overlayProps:{width:"small",height:"medium",maxHeight:"medium"},footer:(0,l.jsx)("div",{style:{width:"100%"},children:(0,l.jsx)(L,{onCancel:c,onApply:o,overrideButtonStyles:{padding:"var(--base-size-8)"}})})})})}let O=({anchorProps:e,itemsLength:t,labelsText:n})=>(0,l.jsx)(S.Q,{leadingVisual:u.TagIcon,trailingAction:u.TriangleDownIcon,...e,"aria-label":"Filter labels","aria-describedby":"select-labels","aria-haspopup":"dialog",size:"small",disabled:0===t,children:0===t?"No labels available":(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"color-fg-muted",children:"Labels: "}),(0,l.jsx)("span",{id:"select-labels",children:n})]})});try{T.displayName||(T.displayName="FilterLabels")}catch{}try{(i=ButtonFilter).displayName||(i.displayName="ButtonFilter")}catch{}let I=e=>{let t=F(e,2);if(e.length>=2){if(2===e.length)return R(e);let n=F(e,3);if(n.length>30)return`${t.slice(0,30)}... +${e.length-2} more`;{let t=e.length>3?` +${e.length-3} more`:"";return`${n}${t}`}}if(1!==e.length)return"All";{let t=e[0]?.text||"";return t.length>30?`${t.slice(0,30)}...`:t}},R=e=>{let t=e[0]?.text||"",n=F(e,2);return n.length>30?t.length>25?`${t.slice(0,25)}... +1 more`:`${n.slice(0,30)}...`:n},F=(e,t)=>e.slice(0,t).map(e=>e.text).join(", "),$=e=>{switch(e){case"PullRequest":return"Pull requests";case"SecurityAlert":return"Security alerts";default:return`${e}s`}},P={filterContainer:"ThreadList-module__filterContainer--eNebD",threadContent:"ThreadList-module__threadContent--Ry8II",threadRow:"ThreadList-module__threadRow--lx6FW"};function M(e){let[t,n]=(0,s.useState)(e.appliedThreads),[r,a]=(0,s.useState)(e.appliedLabels),[i,o]=(0,s.useState)(e.appliedLabels),[c,d]=(0,s.useState)(I(e.appliedLabels));(0,s.useEffect)(()=>{e.appliedLabels.length>0&&!t.includes("Issue")&&n([...t,"Issue"])},[]);let u=(0,s.useCallback)(e=>{t&&t.includes(e)?n(t.filter(t=>t!==e)):n([...t,e])},[t]),m=(0,s.useCallback)(()=>{e.applyThreads(t)},[e,t]),p=(0,s.useCallback)(e=>{o(e),d(I(e))},[]),h=(0,s.useCallback)(()=>{a(i)},[i]),b=(0,s.useCallback)(()=>{o(r),d(I(r))},[r]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:P.threadContent,children:e.subscribableThreadTypes.map((n,r)=>(0,l.jsxs)("div",{className:P.threadRow,style:r===e.subscribableThreadTypes.length-1?{}:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"},children:[(0,l.jsxs)(C.A,{children:[(0,l.jsx)(A.A,{checked:t.includes(n.name),onChange:()=>u(n.name)}),(0,l.jsx)(C.A.Label,{children:$(n.name)})]}),n.enabled?null:(0,l.jsxs)(f.A,{as:"p",sx:{fontSize:"12px",m:0,color:"var(--fgColor-muted)",ml:"var(--base-size-24)"},children:[$(n.name)," are not enabled for this repository"]}),(0,l.jsx)("div",{"aria-live":"polite",children:"Issue"===n.name&&e.showLabelSubscriptions&&t.includes("Issue")?(0,l.jsx)("div",{className:P.filterContainer,children:(0,l.jsx)(T,{filterAction:m,items:e.repoLabels,labelsText:c,onChangeLabels:p,selectedLabels:i,applyLabels:h,resetLabels:b})}):null})]},r))}),(0,l.jsx)(L,{onCancel:e.cancelMenuCallback,onApply:()=>e.saveThreads(t,i),showError:e.showError,disabled:0===t.length||e.isSavingThreads})]})}try{M.displayName||(M.displayName="ThreadList")}catch{}let D={watchCounter:"NotificationsSubscriptionsMenu-module__watchCounter--nAbhU",watchButton:"NotificationsSubscriptionsMenu-module__watchButton--ifxlS"};function B({repositoryId:e,repositoryName:t,watchersCount:n,subscriptionType:r,subscribableThreadTypes:i,repositoryLabels:o,showLabelSubscriptions:m}){let h=(0,s.useMemo)(()=>o.map(e=>({id:e.id,text:e.name,selected:e.subscribed})),[o]),f=h.filter(e=>e.selected),b=(0,s.useMemo)(()=>i.map(e=>e.subscribed||"Issue"===e.name&&m&&f.length>0?e.name:null).filter(e=>null!==e),[i,m,f]),[g,y]=(0,s.useState)(!1),[_,C]=(0,s.useState)(!1),[A,k]=(0,s.useState)(b.length>0?a.CUSTOM:r),[S,j]=(0,s.useState)(A),[E,N]=(0,s.useState)(b),[L,T]=(0,s.useState)(f),[O,I]=(0,s.useState)(!1),R=(0,s.createRef)(),F=(0,s.useCallback)(()=>{C(!1),k(S)},[S]),$=(0,s.useCallback)(async(t,n)=>{I(!0),N(t),T(n),j(a.CUSTOM);let r=new FormData;r.set("do","custom"),r.set("repository_id",e),t.map(e=>{r.append("thread_types[]",e)}),n.map(e=>{e.id&&r.append("labels[]",e.id.toString())}),(await p(r)).ok?(C(!1),I(!1)):y(!0)},[e]),P=(0,s.useCallback)(async t=>{let n=new FormData;t===a.IGNORING?n.set("do","ignore"):t===a.WATCHING?n.set("do","subscribed"):(t===a.NONE||t===a.CUSTOM&&0===E.length)&&n.set("do","included"),n.append("thread_types[]",""),n.set("repository_id",e),await p(n)},[e,E]),B=(0,s.useCallback)(e=>{e===a.CUSTOM?(C(!0),k(a.CUSTOM)):(k(e),j(e),P(e),N([]))},[k]),W=(0,s.useCallback)(e=>{N(e)},[N]),z=(0,s.useMemo)(()=>x(A,t),[A,t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-md-none",children:(0,l.jsxs)(c.W,{children:[(0,l.jsx)(c.W.Button,{"data-testid":"notifications-subscriptions-menu-button-desktop",leadingVisual:A===a.IGNORING?u.BellSlashIcon:u.EyeIcon,trailingAction:null,className:D.watchButton,"aria-label":z,children:(0,l.jsx)(l.Fragment,{})}),(0,l.jsx)(c.W.Overlay,{width:"medium",children:(0,l.jsx)(w,{selected:A,onSelect:B})})]})}),(0,l.jsx)("div",{className:"d-none d-md-block",children:(0,l.jsxs)(c.W,{children:[(0,l.jsxs)(c.W.Button,{"data-testid":"notifications-subscriptions-menu-button-mobile",size:"small",leadingVisual:A===a.IGNORING?u.BellSlashIcon:u.EyeIcon,sx:{'&& [data-component="leadingVisual"]':{color:"var(--fgColor-muted, var(--color-fg-muted))"}},"aria-label":z,children:[v(A),(0,l.jsx)("span",{className:`ml-2 Counter rounded-3 ${D.watchCounter}`,children:n})]}),(0,l.jsx)(c.W.Overlay,{width:"medium",children:(0,l.jsx)(w,{selected:A,onSelect:B})})]})}),(0,l.jsx)(d.A,{returnFocusRef:R,isOpen:_,onDismiss:()=>F(),"aria-labelledby":"header",children:(0,l.jsxs)("div",{"data-testid":"inner",children:[(0,l.jsxs)(d.A.Header,{id:"header",children:["Subscribe to events for ",t]}),(0,l.jsx)(M,{subscribableThreadTypes:i,showLabelSubscriptions:m,cancelMenuCallback:F,appliedThreads:E,repoLabels:h,subscribedThreads:b,applyThreads:W,appliedLabels:L,saveThreads:$,showError:g,isSavingThreads:O})]})})]})}try{B.displayName||(B.displayName="NotificationsSubscriptionsMenu")}catch{}(0,o.k)("notifications-subscriptions-menu",{Component:B})},28784:(e,t,n)=>{function r(e,t={}){!function(e){if(new URL(e,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch")}(e);let n={...t.headers,"GitHub-Verified-Fetch":"true","X-Requested-With":"XMLHttpRequest"};return fetch(e,{...t,headers:n})}function a(e,t){let n={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},a=t?.body?JSON.stringify(t.body):void 0;return r(e,{...t,body:a,headers:n})}function i(e,t={}){let n={...t.headers,"GitHub-Is-React":"true"};return r(e,{...t,headers:n})}function o(e,t){let n={...t?.headers??{},"GitHub-Is-React":"true"};return a(e,{...t,headers:n})}n.d(t,{DI:()=>r,QJ:()=>i,Sr:()=>o,lS:()=>a})},39595:(e,t,n)=>{let r;n.d(t,{CF:()=>f,p_:()=>w,FB:()=>u,Se:()=>N,aC:()=>v,zV:()=>x});let a=new WeakSet,i=new WeakMap;function o(e=document){if(i.has(e))return i.get(e);let t=!1,n=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)d(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&l(e)});n.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let r={get closed(){return t},unsubscribe(){t=!0,i.delete(e),n.disconnect()}};return i.set(e,r),r}function l(e){for(let t of e.querySelectorAll("[data-action]"))d(t);e instanceof Element&&e.hasAttribute("data-action")&&d(e)}function s(e){let t=e.currentTarget;for(let n of c(t))if(e.type===n.type){let r=t.closest(n.tag);a.has(r)&&"function"==typeof r[n.method]&&r[n.method](e);let i=t.getRootNode();if(i instanceof ShadowRoot&&a.has(i.host)&&i.host.matches(n.tag)){let t=i.host;"function"==typeof t[n.method]&&t[n.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),n=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,n),method:t.slice(n+1)||"handleEvent"}}}function d(e){for(let t of c(e))e.addEventListener(t.type,s)}function u(e,t){let n=e.tagName.toLowerCase();if(e.shadowRoot){for(let r of e.shadowRoot.querySelectorAll(`[data-target~="${n}.${t}"]`))if(!r.closest(n))return r}for(let r of e.querySelectorAll(`[data-target~="${n}.${t}"]`))if(r.closest(n)===e)return r}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),p=(e,t="property")=>{let n=m(e);if(!n.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return n},h="attr";function f(e,t){_(e,h).add(t)}let b=new WeakSet;function g(e,t){if(b.has(e))return;b.add(e);let n=Object.getPrototypeOf(e),r=n?.constructor?.attrPrefix??"data-";for(let a of(t||(t=_(n,h)),t)){let t=e[a],n=p(`${r}${a}`),i={configurable:!0,get(){return this.getAttribute(n)||""},set(e){this.setAttribute(n,e||"")}};"number"==typeof t?i={configurable:!0,get(){return Number(this.getAttribute(n)||0)},set(e){this.setAttribute(n,e)}}:"boolean"==typeof t&&(i={configurable:!0,get(){return this.hasAttribute(n)},set(e){this.toggleAttribute(n,e)}}),Object.defineProperty(e,a,i),a in e&&!e.hasAttribute(n)&&i.set.call(e,t)}}let y=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){let t=this,n=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,n)};let r=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,r)};let a=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,n,r){t.attributeChangedCallback(this,e,n,r,a)};let i=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,i)},set(e){i=e}}),function(e){let t=e.observedAttributes||[],n=e.attrPrefix??"data-",r=e=>p(`${n}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[..._(e.prototype,h)].map(r).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var n,r;e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),!function(e){for(let t of e.querySelectorAll("template[data-shadowroot]"))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0))}(e),g(e),a.add(e),e.shadowRoot&&(l(r=e.shadowRoot),o(r)),l(e),o(e.ownerDocument),t?.call(e),e.shadowRoot&&(l(n=e.shadowRoot),o(n))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,n,r,a){g(e),"data-catalyst"!==t&&a&&a.call(e,t,n,r)}};function _(e,t){if(!Object.prototype.hasOwnProperty.call(e,y)){let t=e[y],n=e[y]=new Map;if(t)for(let[e,r]of t)n.set(e,new Set(r))}let n=e[y];return n.has(t)||n.set(t,new Set),n.get(t)}function v(e,t){_(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return u(this,t)}})}function x(e,t){_(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return function(e,t){let n=e.tagName.toLowerCase(),r=[];if(e.shadowRoot)for(let a of e.shadowRoot.querySelectorAll(`[data-targets~="${n}.${t}"]`))a.closest(n)||r.push(a);for(let a of e.querySelectorAll(`[data-targets~="${n}.${t}"]`))a.closest(n)===e&&r.push(a);return r}(this,t)}})}function w(e){new CatalystDelegate(e)}let C=new Map,A=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),k=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let n={once:!0,passive:!0,signal:t.signal},r=()=>t.abort();document.addEventListener("mousedown",r,n),document.addEventListener("touchstart",r,n),document.addEventListener("keydown",r,n),document.addEventListener("pointerdown",r,n)}),S={ready:()=>A,firstInteraction:()=>k,visible:e=>new Promise(t=>{let n=new IntersectionObserver(e=>{for(let r of e)if(r.isIntersecting){t(),n.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))n.observe(t)})},j=new WeakMap;function E(e){cancelAnimationFrame(j.get(e)||0),j.set(e,requestAnimationFrame(()=>{for(let t of C.keys()){let n=e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||n){let r=n?.getAttribute("data-load-on")||"ready",a=r in S?S[r]:S.ready;for(let e of C.get(t)||[])a(t).then(e);C.delete(t),j.delete(e)}}}))}function N(e,t){C.has(e)||C.set(e,new Set),C.get(e).add(t),E(document.body),r||(r=new MutationObserver(e=>{if(C.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&E(e)})).observe(document,{subtree:!0,childList:!0})}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react-css","react-lib","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_primer_react_lib-esm_Fea-39267a","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_AnchoredOverlay_AnchoredOverlay_js","vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-7845da","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js","vendors-node_modules_primer_react_lib-esm_FilteredActionList_FilteredActionListEntry_js","ui_packages_failbot_failbot_ts","ui_packages_react-core_create-browser-history_ts-ui_packages_react-core_AppContextProvider_ts-ffb979","ui_packages_react-core_register-partial_ts"],()=>t(84923)),e.O()}]);
//# sourceMappingURL=notifications-subscriptions-menu-f1257913918d.js.map